{% load static %}
<link rel="stylesheet" href="{% static 'layout/css/dataTables.bootstrap5.css' %}">
<link rel="stylesheet" href="{% static 'layout/css/fixedColumns.bootstrap5.min.css' %}">

<div class="container col-9 py-4">
  <div class="row">
    <div class="row mb-5" style="height: 50vh;">
      <h1>{{ main.data.abstract.label_kor }}</h1>
      <hr>
      <div class="col-7">
        <div class="mb-4">
          <p class="fw-bold">정의</p>
          <p>$${{ main.data.abstract.syntax_katex }}$$</p>
        </div>
        <div class="mb-4">
          <p class="fw-bold">선택된 계열</p>
          <ul>
            {% for si, ss in main.data.abstract.selected_label_kor.items %}
            <li>{{ si }}: {{ ss }}</li>
            {% endfor %}
          </ul>
        </div>
        <div class="mb-4">
          <p class="fw-bold">기초통계량</p>
          <table class="table table-hover">
            <thead>
              <tr>
                {% for h in main.data.abstract.desc.header %}
                <th>{{ h }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for r in main.data.abstract.desc.rows %}
              <tr>
                {% for v in r %}
                <td>{{ v }}</td>
                {% endfor %}
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-5">
        <p class="fw-bold">분포</p>
        {% autoescape off %}
        {{ main.data.abstract.hist }}
        {% endautoescape %}
        <!-- <canvas id="histogram"></canvas> -->
      </div>
    </div>
    <div style="height: 50vh;">
      <table class="table table-striped table-hover" id="result">
        <thead>
          <tr>
            {% for h in main.data.table.header %}
            <td>{{ h }}</td>
            {% endfor %}
          </tr>
        </thead>
      </table>
    </div>
  </div>
</div>

<!-- charts -->
<script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>

<!-- table -->
<script src="{% static 'layout/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'layout/js/dataTables.bootstrap5.js' %}"></script>
<script src="{% static 'layout/js/dataTables.fixedColumns.min.js' %}"></script>
<script src="{% static 'layout/js/fixedColumns.bootstrap5.min.js'%}"></script>
<script>
  var data = JSON.parse("{{ main.data.table.rows | escapejs }}");
  $.extend(true, $.fn.dataTable.defaults, {
      ordering: false,
  });
  $(document).ready(function() {
    $('#result').DataTable({
      data: data,
      order: [],
      "columnDefs": [
        {"width": "60px", "targets": 1},
        {"width": "60px", "targets": 1},
        {"width": "150px", "targets": 2},
        {"width": "40px",  "targets": 3},
        {orderable: true, targets: 4},
        {"width": "60px", "targets": 4},
        {"width": "50px", "targets": 6},
      ],
      scrollX: true,
      scrollY: "400px",
      paging: false,
      fixedHeader: true,
      fixedColumns: {left:7},
      deferRender: true,
    })
  });
</script>
